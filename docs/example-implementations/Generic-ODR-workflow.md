## A Generic Workflow for a Unified ODR service

### Overview

Any online dispute resolution consists of the following interactions. Bear in mind, this is just an example workflow for a simple transaction between a complainant and a service provider. The order of interactions between the two parties is arbitratrily selected on the basis of several interviews with subject matter experts.

A typical workflow for an online dispute consits of the following steps

#### Step 1: Complainant researches and selects a dispute service provider

The complainant researches various dispute resolution services to find the most suitable options for a dispute. They compare the category of dispute, the expertise of the provider and the common consensus between the complainant and the respondent to make an informed decision.

#### Step 2: Complainant submits all the information

The complainant fills out an application form provided by the chosen dispute service provider.
The application forms typically requires personal details such as name, address, contact information along with details of the respondent. Before uploading the case documents, the service provider asks for consent from the complainant.

#### Step 3: ODR platform reviews the case information and evaluates the documents

The ODR platform reviews the dispute information submitted by the complainant. The ODR platform confirms the creation of a new dispute order and asks the complainant to complete the payment. The payment structure could vary based on the case.

#### Step 4: ODR platform requests the complainant for more information

After the case/dispute order has been confirmed, the ODR platform instructs the complainant to proceed to the ODR platform to complete the other procedures related to the dispute.

#### Step 5: ODR platform assigns a case agent

After the ODR platform has reviewed the case details, a case agent is assigned who will work to resolve the complaint/dispute

#### Step 6: ODR platform assigns a hearing date

The dispute might require a hearing to conclude the decision, the hearing date for that dispute it updated to the complainant.

#### Step 6: ODR platform resolves the dispute and completes the process

The agent of the ODR platform resolves the dispute and updates the complainant about the final decision of the dispute. The ODR platforms will regularly update the customer with the status of the dispute.

According to beckn protocol, any consumer-provider interaction can be broken down into four stages namely, Discovery, Ordering, Fulfillment and Post-Fulfillment. Without loss of generality, let us break the above dispute resolution process into the four stages and describe the subinteractions that occur within them.

## Discovery (Discovering ODR service providers and their services)

In this stage, many interactions can happen like,

1. Complainant declares their Intent to one or more ODR platforms
2. ODR platform publishes their catalog of dispute resolution services

### Complainant-side Actions

A Complainant can declare their intent in many ways like

- Searching for a Dispute Resolution Provider by its name or code
- Searching for Dispute Resolution Providers based on rating
- Searching for Dispute Resolution Products by its name / code
- Searching for Dispute Resolution Products by its category name / code
- Searching for Dispute Resolution Products by price
- Viewing the catalog of Dispute Resolution Products of the provider
- Viewing the details of a Dispute Resolution provider
- Viewing the details of a particular Dispute Resolution Product

### ODR platform-side Actions

In this interaction, the Dispute Resolution Provider publishes their catalog of products. A Dispute Resolution Provider can publish various types of catalogs like,

- Catalog of Dispute Resolution Products
- Catalog of Dispute Resolution Product Categories
- Catalog of Dispute Resolution Providers
- Catalog containing details of a single provider
- Catalog of a Dispute Resolution provider containing details of a single product

### Logical Workflow

```mermaid
    sequenceDiagram
    Complainant->>ODR platform: Declare Intent to look for ODR services
    ODR platform->>Complainant: Publish Catalog
```

### Beckn Protocol API Workflow

In beckn protocol, the search intent generated by the Complainant Platform (BAP) is typically published on the gateway (BG) that broadcasts the intent to multiple provider platforms (BPPs). Each of the BPPs return their catalogs directly to the BAP via asynchronous callbacks. The workflow for that is shown below.

```mermaid
    sequenceDiagram
    OCP (BAP)->>Gateway (BG): Declare Intent to look for ODR services (search)
    Gateway (BG)->>Registry: Lookup ODR Platforms (lookup)
    Registry->>Gateway (BG): List of ODR Platforms (200 OK)
    Gateway (BG)->>ODR Platform 1 (BPP1): Declare Intent to look for ODR services (search)
    Gateway (BG)->>ODR Platform 2 (BPP2): Declare Intent to look for ODR services (search)
    Gateway (BG)->>ODR Platform n (BPPn): Declare Intent to look for ODR services (search)
    ODR Platform 1 (BPP1)->>OCP (BAP): Publish Catalog of Provider 1 (on_search)
    ODR Platform 2 (BPP2)->>OCP (BAP): Publish Catalog of Provider 2 (on_search)
    ODR Platform n (BPPn)->>OCP (BAP): Publish Catalog of Provider n (on_search)
```

## Ordering (Case/Dispute Application Stage)

Creating a case for a dispute consists of multiple interactions like,

### Complainant-side actions

1. Selecting a provider
2. Submitting the details to create the dispute
3. Sharing respondent information, dispute details
4. Submitting the case documents and completing the payment

### ODR platform-side actions

1. Requesting the details to create the dispute
2. Requesting respondent information, dispute details
3. Requesting the case documents and asking for the payment
4. Creating the dispute/case order

### Logical Workflow

The below diagram illustrates the logical interactions between an OCP and an ODR during the Dispute Application stage.

```mermaid
    sequenceDiagram
    OCP->>ODR: OCP selects the product
    ODR->>OCP: Requests for details to create the dispute
    OCP->>ODR: OCP provides respondent details, consent and uploads case documents
    ODR->>OCP: ODR confirms the dispute application
```

### Beckn Protocol API Workflow

```mermaid
    sequenceDiagram
    Complainant Platform (BAP)->>Provider Platform 1 (BPP1): Select ODR product from provider's catalog (select)
    Provider Platform 1 (BPP1)->>Complainant Platform (BAP): Send service details with a quote that is for the chosen service (on_select)
    Complainant Platform (BAP)->>Provider Platform 1 (BPP1): Submits complainant information (init)
    Provider Platform 1 (BPP1)->>Complainant Platform (BAP): Send draft dispute order asking for respondent details (on_init)
    Complainant Platform (BAP)->>Provider Platform 1 (BPP1): Submits respondent information (init)
    Provider Platform 1 (BPP1)->>Complainant Platform (BAP): Send draft dispute order asking for consent details (on_init)
    Complainant Platform (BAP)->>Provider Platform 1 (BPP1): Submits consent information (init)
    Provider Platform 1 (BPP1)->>Complainant Platform (BAP): Send draft dispute order asking for dispute details and payment (on_init)
    Complainant Platform (BAP)->>Provider Platform 1 (BPP1): Agrees to dispute order and sends the dispute details (confirm)
    Provider Platform 1 (BPP1)->>Complainant Platform (BAP): Send confirmed dispute application with status (on_confirm)
```

## Fulfillment (Order Status, Updates and Cancellation)

Complainant will check the dispute details and confirms the dispute with payment (might also update the order)
Post payment complainant will get updates about the dispute

### User-side Actions

- Requests to fetch the latest status of the dispute
- Requests to cancel the dispute

### Provider-side Actions

- Send status of the dispute to the complainant
- Send dispute agent details and hearing date updates to the complainant
- Cancel the dispute if the complainant wants the dispute to be cancelled.

### Logical Worklow

```mermaid
    sequenceDiagram
    OCP->>ODR: Asks for status of the order
    ODR->>OCP: Send the active status of the order
    OCP->>ODR: Request for an update in the dispute details
    ODR->>OCP: Sends the updated dispute order details
```

### Beckn API Workflow

```mermaid
    sequenceDiagram
    Complainant Platform (BAP)->> Provider 1 (BPP): BAP request to fetch the status of the dispute (status)
    Provider 1 (BPP)->>Complainant Platform (BAP): BPP provides the latest status of the dispute to BAP (on_status)
    Provider 1 (BPP)->>Complainant Platform (BAP): BPP adds a case manager to the dispute and sends an update (on_update)
    Provider 1 (BPP)->>Complainant Platform (BAP): BPP adds a hearing date to the dispute and sends an update (on_update)
    Complainant Platform (BAP)->> Provider 1 (BPP): BAP request to fetch the status of the dispute (status)
    Provider 1 (BPP)->>Complainant Platform (BAP): BPP provides the latest status of the dispute to BAP when the dispute is closed (on_status)
```

## Post-Fulfillment (Order rating and support)

### User-side Actions

- Request to rate the order
- Request to get support for the dispute

#### Provider-side Actions

- Rates the order of the BAP
- Provides support to the BAP

### Order Rating

#### Logical Worklow

```mermaid
    sequenceDiagram
    OCP->>ODR: Rates the order
    ODR->>OCP: Sends rating confirmation
```

#### Beckn API Workflow

```mermaid
    sequenceDiagram
    Complainant Platform (BAP)->> Provider 1 (BPP): BAP rates the order (rating)
    Provider 1 (BPP)->>Complainant Platform (BAP): BPP sends rating of order (on_rating)
```

### Order Support

#### Logical Worklow

```mermaid
    sequenceDiagram
    OCP->>ODR: Request to get support for the order
    ODR->>OCP: Sends support to the BAP
```

#### Beckn API Workflow

```mermaid
    sequenceDiagram
    Complainant Platform (BAP)->> Provider 1 (BPP): BAP requests to get support for the order (support)
    Provider 1 (BPP)->>Complainant Platform (BAP): BPP sends support of order (on_support)
```
